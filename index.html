<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="shortcut icon" href="./assets/zyro-image.png">
    <script src="js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <script src="https://kit.fontawesome.com/feca64167c.js" crossorigin="anonymous"></script>
    <title>CSabio</title>
</head>
<body>
    <header class="flex">
        <div class="container flex">    
            <div id="change-color" class="flex">
                <svg id="sun" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"/></svg>
                <svg id="moon" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></svg>
            </div>      
            <div class="logo flex">
                <img id="logo" src="assets/logo-csabio.png">
                <img id="logo-oscuro" src="assets/logo-csabio-blanco.png" alt="">
                <h1>CARTERA : <span id="cartera">$$$</span></h1>
                <h1>Ganancias Totales : <span id="totalGains">0</span></h1>
                <h2><span id="contadorTiempo">tiempo</span></h2>
                <button id="btnIniciar">Iniciar Juego</button>
            </div>
            <div class="contador flex">
                <h2>Nuevas Gráficas: <span id="coolDown">10</span></h2>
                
            </div>
            <div class="logos flex">
                <img src="./assets/logo-conta.png">
                <img src="./assets/logo-progra.png">
            </div>
        </div>
    </header>
    <div class="container-main">
        <main>
            <section class="sect-1 flex">
                <div id="apple" class="card flex">
                    <svg id="logo-apple" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-apple" viewBox="0 0 16 16"> <path d="M11.182.008C11.148-.03 9.923.023 8.857 1.18c-1.066 1.156-.902 2.482-.878 2.516.024.034 1.52.087 2.475-1.258.955-1.345.762-2.391.728-2.43zm3.314 11.733c-.048-.096-2.325-1.234-2.113-3.422.212-2.189 1.675-2.789 1.698-2.854.023-.065-.597-.79-1.254-1.157a3.692 3.692 0 0 0-1.563-.434c-.108-.003-.483-.095-1.254.116-.508.139-1.653.589-1.968.607-.316.018-1.256-.522-2.267-.665-.647-.125-1.333.131-1.824.328-.49.196-1.422.754-2.074 2.237-.652 1.482-.311 3.83-.067 4.56.244.729.625 1.924 1.273 2.796.576.984 1.34 1.667 1.659 1.899.319.232 1.219.386 1.843.067.502-.308 1.408-.485 1.766-.472.357.013 1.061.154 1.782.539.571.197 1.111.115 1.652-.105.541-.221 1.324-1.059 2.238-2.758.347-.79.505-1.217.473-1.282z"/> <path d="M11.182.008C11.148-.03 9.923.023 8.857 1.18c-1.066 1.156-.902 2.482-.878 2.516.024.034 1.52.087 2.475-1.258.955-1.345.762-2.391.728-2.43zm3.314 11.733c-.048-.096-2.325-1.234-2.113-3.422.212-2.189 1.675-2.789 1.698-2.854.023-.065-.597-.79-1.254-1.157a3.692 3.692 0 0 0-1.563-.434c-.108-.003-.483-.095-1.254.116-.508.139-1.653.589-1.968.607-.316.018-1.256-.522-2.267-.665-.647-.125-1.333.131-1.824.328-.49.196-1.422.754-2.074 2.237-.652 1.482-.311 3.83-.067 4.56.244.729.625 1.924 1.273 2.796.576.984 1.34 1.667 1.659 1.899.319.232 1.219.386 1.843.067.502-.308 1.408-.485 1.766-.472.357.013 1.061.154 1.782.539.571.197 1.111.115 1.652-.105.541-.221 1.324-1.059 2.238-2.758.347-.79.505-1.217.473-1.282z"/> </svg>
                    <div class="text" id="text-apple">
                        <span>APPLE</span>
                        <span>$<span id="valAccionApple">#</span> <br>c/acción</span>
                        <p >Acciones Compradas: <span id="acciCompApple">0</span></p>
                    </div>
                </div>
                <div id="nike" class="card flex">
                    <svg  id="logo-nike" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Nike</title><path d="M24 7.8L6.442 15.276c-1.456.616-2.679.925-3.668.925-1.12 0-1.933-.392-2.437-1.177-.317-.504-.41-1.143-.28-1.918.13-.775.476-1.6 1.036-2.478.467-.71 1.232-1.643 2.297-2.8a6.122 6.122 0 00-.784 1.848c-.28 1.195-.028 2.072.756 2.632.373.261.886.392 1.54.392.522 0 1.11-.084 1.764-.252L24 7.8z"/></svg>
                    <div class="text" id="text-nike">
                        <span>NIKE</span>
                        <span>$<span id="valAccionNike">#</span> c/acción</span>
                        <p >Acciones Compradas: <span id="acciCompNike">0</span></p>
                    </div>
                </div>
                <div id="google" class="card flex">
                    <svg  id="logo-google"  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-google" viewBox="0 0 16 16"> <path d="M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"/> </svg>
                    <div class="text" id="text-google">
                        <span>GOOGLE</span>
                        <span>$<span id="valAccionGoogle">#</span> c/acción</span>
                        <p >Acciones Compradas: <span id="acciCompGoogle">0</span></p>
                    </div>  
                    
                </div>
            </section>
            <section class="sect-2 flex">
                <div class="stats" style="background-color: rgba(0, 0, 0, 0.842);">
                    <canvas id="stats" width="700vh" height="400px"></canvas>
                </div>
                <div class="btns">
                    <div class="btn flex" id="comprar">
                        <svg class="responsive" xmlns="http://www.w3.org/2000/svg" height="1.5em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M160 112c0-35.3 28.7-64 64-64s64 28.7 64 64v48H160V112zm-48 48H48c-26.5 0-48 21.5-48 48V416c0 53 43 96 96 96H352c53 0 96-43 96-96V208c0-26.5-21.5-48-48-48H336V112C336 50.1 285.9 0 224 0S112 50.1 112 112v48zm24 48a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm152 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"/></svg>
                        <span>COMPRA</span>
                        <div class="cant">
                            <span>Cant:</span>
                            <input min="0" id="cantInput" type="number">
                        </div>
                        <svg class="check" id="check1" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
                    </div>
                    <div class="btn flex" id="venta">
                        <svg class="responsive" xmlns="http://www.w3.org/2000/svg" height="1.5em" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M64 64C28.7 64 0 92.7 0 128V384c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H64zm64 320H64V320c35.3 0 64 28.7 64 64zM64 192V128h64c0 35.3-28.7 64-64 64zM448 384c0-35.3 28.7-64 64-64v64H448zm64-192c-35.3 0-64-28.7-64-64h64v64zM288 160a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg>
                        <span>VENTA</span>
                        <div class="cant">
                            <span>Cant:</span>
                            <input min="0" id="cantInput2" type="number">
                        </div>
                        <svg class="check2" id="check2" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
                    </div>
                </div>
            </section>
            <section class="sect-3 flex">
                <div class="card">
                    <div class="chat flex">
                        <div class="title flex" id="msj">
                            <span>Mensajes</span>
                        </div>
                        <div class="message flex">
                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg>
                            <span class="chat-text" id="data_chat">Gira el dado para ver un mensaje</span>
                        </div>
                        <div class="ganancias">
                            <div class="title2 flex">
                                <span>Ganancia </span>
                            </div>
                            <div class="ganancias-text flex">
                                <span id="valorInicio"></span>
                                <span id="ganaPierde">Aún no hay ganancias</span>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </section>
            
        </main>
    </div>
    <div id="ventanaModal" class="modal">
        <div class="contenido-modal">
            <span class="cerrar">&times;</span>
            <h2>Estadisticas de la partida</h2>
            <h3>Vendiste <span id="accVendiApple">0</span> acciones de Apple</h3>
            <h3>Vendiste <span id="accVendiNike">0</span> acciones de Nike</h3>
            <h3>Vendiste <span id="accVendiGoogle">0</span> acciones de Google</h3>
            <h3>Tus ganancias totales alcanzan los: <span id="gananciasTotales">0</span></h3>
            <h3>Alcanzaste un maximo de <span id="carteraMaximo">0</span> bitcoin en la cartera</h3>
        </div>
    </div>
    <footer class="flex">
        <h1>Contabilidad y Finanzas x Desarrollo Web - COVAO 2023</h1>
    </footer>
    <script>
        let acciVendiApple=0
        let acciVendiNike=0
        let acciVendiGoogle=0
        var tiempoJuego = 100;
        let cartera = 2000;
        let carteraMax = cartera;
        //valor acciones
        let valAccionApple=190;
        let valAccionNike=107;
        let valAccionGoogle=124;
        //cantidad acciones compradas
        let acciCompApple=0;
        let acciCompNike=0;
        let acciCompGoogle=0;
        let empresaSelect=-1;
        //cantidad de acciones que se van a comprar
        let cantAcciComprar ;
        //Historial del valor de las acciones
        var histAccionApple=[]
        var histAccionGoogle=[]
        var histAccionNike=[]
        
        let ultimoValorAp=0;
        let ultimoValorGo=0;
        let ultimoValorNi=0;

        let gananciasTotales=0;

        histAccionApple[0]=valAccionApple;
        histAccionGoogle[0]=valAccionGoogle;
        histAccionNike[0]=valAccionNike;
        histSelected=[];
        var etiquetasSelect=[]

        var puedePresionarApple=false
        var puedePresionarGoogle=false
        var puedePresionarNike=false

        //Cambiar empresa
        MostrarValorAcciones()
        const btnApple=document.getElementById('apple');
        btnApple.addEventListener('click', () => {
            if(puedePresionarApple)
                AppleSeleccionado();
            else
            {
                Swal.fire({
                        title:"Inicie el juego para seleccionar una empresa",
                        icon: 'error'
                })
            }
        });
        const btnNike=document.getElementById('nike')
        btnNike.addEventListener('click',()=>{
            if(puedePresionarNike)
                NikeSeleccionado();
            else
            {
                Swal.fire({
                        title:"Inicie el juego para seleccionar una empresa",
                        icon: 'error'
                })
            }
        })
        const btnGoogle=document.getElementById('google');
        btnGoogle.addEventListener('click', ()=>{
            if(puedePresionarGoogle)
                GoogleSeleccionado();
            else
            {
                Swal.fire({
                        title:"Inicie el juego para seleccionar una empresa",
                        icon: 'error'
                })
            }
        })

        //Cambiar Color Seleccionado
        let svgLogoApple = document.getElementById('logo-apple');
        let textApple = document.getElementById('text-apple');

        let svgLogoNike = document.getElementById('logo-nike');
        let textNike = document.getElementById('text-nike');

        let svgLogoGoogle = document.getElementById('logo-google');
        let textGoogle = document.getElementById('text-google');
        let valGen;
        function AppleSeleccionado(){
            CECApple();
            empresaSelect=0;
            btnApple.style.backgroundColor='black';
            btnNike.style.backgroundColor='white';
            btnGoogle.style.backgroundColor='white';
            histSelected=histAccionApple;
            etiquetasSelect=histSelected;
            PerdidaGanancia()
            drawGraph()
        }
        function NikeSeleccionado(){
            CECNike();
            empresaSelect=1;
            btnGoogle.style.backgroundColor='white';
            btnApple.style.backgroundColor='white';
            btnNike.style.backgroundColor='black';
            histSelected=histAccionNike
            etiquetasSelect=histSelected;
            PerdidaGanancia()
            drawGraph()
        }
        function GoogleSeleccionado(){
            CECGoogle(); 
            empresaSelect=2;
            btnApple.style.backgroundColor='white';
            btnNike.style.backgroundColor='white';
            btnGoogle.style.backgroundColor='black';
            histSelected=histAccionGoogle
            etiquetasSelect=histSelected;
            PerdidaGanancia()
            drawGraph()
        }
        //Cambiar Empresa Contenido
        function CECApple(){
            svgLogoApple.style.fill = 'white';
            textApple.style.color = 'white';
            svgLogoNike.style.fill='black';
            textNike.style.color = 'black';
            svgLogoGoogle.style.fill = 'black';
            textGoogle.style.color='black';
        }
        function CECNike(){
            svgLogoApple.style.fill = 'black';
            textApple.style.color = 'black';
            svgLogoNike.style.fill='white';
            textNike.style.color = 'white';
            svgLogoGoogle.style.fill = 'black';
            textGoogle.style.color='black';
        }
        function CECGoogle(){
            svgLogoApple.style.fill = 'black';
            textApple.style.color = 'black';
            svgLogoNike.style.fill='black';
            textNike.style.color = 'black';
            svgLogoGoogle.style.fill = 'white';
            textGoogle.style.color='white';
        }
        function NonSelected()
        {
            svgLogoApple.style.fill = 'black';
            textApple.style.color = 'black';
            svgLogoNike.style.fill='black';
            textNike.style.color = 'black';
            svgLogoGoogle.style.fill = 'black';
            textGoogle.style.color='black';
            btnApple.style.backgroundColor='white';
            btnNike.style.backgroundColor='white';
            btnGoogle.style.backgroundColor='white';
        }
        // Valor de las acciones
        function MostrarValorAcciones(){
            let valAccApple = document.getElementById('valAccionApple');
            valAccApple.innerHTML = valAccionApple;
            let valAccNike = document.getElementById('valAccionNike');
            valAccNike.innerHTML = valAccionNike;
            let valAccGoogle = document.getElementById('valAccionGoogle');
            valAccGoogle.innerHTML = valAccionGoogle;
        }
        // Cantidad de acciones compradas
        function MostrarCantidadAcciones(){
            let cantAccionesApple = document.getElementById('acciCompApple');
            cantAccionesApple.innerHTML = acciCompApple;
            let cantAccionesNike = document.getElementById('acciCompNike');
            cantAccionesNike.innerHTML = acciCompNike;
            let cantAccionesGoogle = document.getElementById('acciCompGoogle');
            cantAccionesGoogle.innerHTML = acciCompGoogle;
        }  
        //Actualizar Cartera
        function ActualizarCartera(){
            let carteraSpan=document.getElementById('cartera');
            carteraSpan.innerText = `$${cartera}`;
        }
        function ActualizarGains(){
            let carteraSpan=document.getElementById('totalGains');
            carteraSpan.innerText = `$${gananciasTotales}`;
        }
        //Compra de acciones
        const btnCheckCompra=document.getElementById('check1');
        btnCheckCompra.addEventListener('click',() => {
            ComprarAccion();
        }); 
        const btnCheckVenta=document.getElementById('check2');
        btnCheckVenta.addEventListener('click',() => {

            VenderAccion();
        });
        function ComprarAccion(){
            cantAcciComprar = parseInt(document.getElementById('cantInput').value);
            if(empresaSelect === 0)
            {
                if(cartera>(valAccionApple*cantAcciComprar)){
                    cartera-=(valAccionApple*cantAcciComprar);
                    acciCompApple +=cantAcciComprar;
                    Swal.fire({
                        title:"La compra ha sido realizada con exito!!",
                        icon: 'success'
                    })
                    ultimoValorAp=valAccionApple;
                    PerdidaGanancia()
                }else{
                    Swal.fire({
                        title:"No tienes suficiente dinero para comprar acciones",
                        icon:'error'
                    })
                }
            }
            else if(empresaSelect === 1)
            {
                if(cartera>(valAccionNike*cantAcciComprar)){
                    cartera-=(valAccionNike*cantAcciComprar);
                    acciCompNike +=cantAcciComprar;
                    Swal.fire({
                        title:"La compra ha sido realizada con exito!!",
                        icon: 'success'
                    })
                    ultimoValorNi=valAccionNike
                    PerdidaGanancia()
                }else{
                    Swal.fire({
                        title:"No tienes suficiente dinero para comprar acciones",
                        icon:'error'
                    })
                }
            }
            else if(empresaSelect === 2)
            {
                if(cartera>(valAccionGoogle*cantAcciComprar)){
                    cartera-=(valAccionGoogle*cantAcciComprar);
                    acciCompGoogle +=cantAcciComprar;
                    Swal.fire({
                        title:"La compra ha sido realizada con exito!!",
                        icon: 'success'
                    })
                    ultimoValorGo=valAccionGoogle
                    PerdidaGanancia()
                }else{
                    Swal.fire({
                        title:"No tienes suficiente dinero para comprar acciones",
                        icon:'error'
                    })
                }
            }
            else
            {
                Swal.fire({
                        title:"Selecciona una empresa para comprar",
                        icon:'error'
                    })
            }
            MostrarCantidadAcciones();
            ActualizarCartera();
        }
        var valor
        var ganaPierde = document.getElementById("ganaPierde")
        function PerdidaGanancia()
        {
            switch(empresaSelect){
                case 0:
                    valor=valAccionApple-ultimoValorAp
                    if(ultimoValorAp!=0)
                    {
                        if(valor<0)
                        {
                            ganaPierde.innerHTML="Perderias: $"+-valor
                            ganaPierde.style.color="red"
                        }
                        else
                        {
                            ganaPierde.innerHTML="Ganarias: $"+valor
                            ganaPierde.style.color="green"
                        }
                        document.getElementById("valorInicio").innerHTML="Compraste la accion por: $"+ultimoValorAp
                    }
                    else
                    {
                        document.getElementById("valorInicio").innerHTML=""
                        document.getElementById("ganaPierde").innerHTML="Aún no hay ganancias"
                    }
                    break
                case 1:
                    valor=valAccionNike-ultimoValorNi
                    if(ultimoValorNi!=0)
                    {
                        if(valor<0)
                        {
                            ganaPierde.innerHTML="Perderias: $"+-valor
                            ganaPierde.style.color="red"
                        }
                        else
                        {
                            ganaPierde.innerHTML="Ganarias: $"+valor
                            ganaPierde.style.color="green"
                        }
                        document.getElementById("valorInicio").innerHTML="Compraste la accion por: $"+ultimoValorNi
                    }
                    else
                    {
                        document.getElementById("valorInicio").innerHTML=""
                        document.getElementById("ganaPierde").innerHTML="Aún no hay ganancias"
                    }
                    break
                case 2:
                    valor=valAccionGoogle-ultimoValorGo
                    if(ultimoValorGo!=0)
                    {
                        if(valor<0)
                        {
                            ganaPierde.innerHTML="Perderias: $"+-valor
                            ganaPierde.style.color="red"
                        }
                        else
                        {
                            ganaPierde.innerHTML="Ganarias: $"+valor
                            ganaPierde.style.color="green"
                        }
                        document.getElementById("valorInicio").innerHTML="Compraste la accion por: $"+ultimoValorGo
                    }
                    else
                    {
                        document.getElementById("valorInicio").innerHTML=""
                        document.getElementById("ganaPierde").innerHTML="Aún no hay ganancias"
                    }
                    break
                default:
                    document.getElementById("valorInicio").innerHTML=""
                    document.getElementById("ganaPierde").innerHTML="Aún no hay ganancias"
                    break
            }
        }
        function VenderAccion(){
            cantAcciVender = parseInt(document.getElementById('cantInput2').value);
            if(empresaSelect === 0)
            {
                if(acciCompApple>=cantAcciVender){
                    cartera+=(valAccionApple*cantAcciVender);
                    if(cartera>=carteraMax)
                        carteraMax=cartera
                    gananciasTotales+=(valAccionApple*cantAcciVender);
                    acciCompApple -=cantAcciVender;
                    acciVendiApple+=cantAcciVender;
                    Swal.fire({
                        title:"Se han vendido las "+cantAcciVender+" acciones de Apple",
                        icon: 'success'
                    })
                    if(acciCompApple===0)
                    {
                        ultimoValorAp=0
                    }
                    PerdidaGanancia()
                    ActualizarGains()
                }else{
                    Swal.fire({
                        title:"No tienes suficientes acciones para vender",
                        icon:'error'
                    })
                }
            }
            else if(empresaSelect === 1)
            {
                if(acciCompNike>=cantAcciVender){
                    cartera+=(valAccionNike*cantAcciVender);
                    if(cartera>=carteraMax)
                        carteraMax=cartera
                    gananciasTotales+=(valAccionNike*cantAcciVender);
                    acciCompNike -=cantAcciVender;
                    acciVendiNike+=cantAcciVender;
                    Swal.fire({
                        title:"Se han vendido  "+cantAcciVender+" acciones de Nike",
                        icon: 'success'
                    })
                    if(acciCompNike===0)
                    {
                        ultimoValorNi=0
                    }
                    PerdidaGanancia()
                    ActualizarGains()
                }else{
                    Swal.fire({
                        title:"No tienes suficientes acciones para vender",
                        icon:'error'
                    })
                }
                
            }
            else if(empresaSelect === 2)
            {
                if(acciCompGoogle>=cantAcciVender){
                    cartera+=(valAccionGoogle*cantAcciVender);
                    if(cartera>=carteraMax)
                        carteraMax=cartera
                    gananciasTotales+=(valAccionGoogle*cantAcciVender);
                    acciCompGoogle -=cantAcciVender;
                    acciVendiGoogle+=cantAcciVender;
                    Swal.fire({
                        title:"Se han vendido las "+cantAcciVender+" acciones de Google",
                        icon: 'success'
                    })
                    if(acciCompGoogle===0)
                    {
                        ultimoValorGo=0
                    }
                    PerdidaGanancia()
                    ActualizarGains()
                }else{
                    Swal.fire({
                        title:"No tienes suficientes acciones para vender",
                        icon:'error'
                    })
                    
                }
                
            }
            MostrarCantidadAcciones();
            ActualizarCartera();
        }
        
        const ctx = document.querySelector("#stats");
        function drawGraph()
        {
            new Chart(ctx, {
                type: 'line',
                data: {
                labels:etiquetasSelect,
                datasets: [{
                    label:"Valor de acciones",
                    data:histSelected,
                    backgroundColor: 'rgba(250,250,250,0.7)',
                    tension:0
                }]
                },
                options: {
                events: ['click'],
                scales: {
                    y: {
                    beginAtZero: true
                    }
                },
                transitions: {
                    show: {
                        animations: {
                        x: {
                            from: 0
                        },
                        y: {
                            from: 0
                        }
                        }
                    },
                    hide: {
                        animations: {
                        x: {
                            to: 0
                        },
                        y: {
                            to: 0
                        }
                        }
                    }
                }
                }
            });
        }
        function valAleatorio()
        {
            histAccionGoogle[histAccionGoogle.length]=Math.floor(Math.random()*200)
            histAccionApple[histAccionApple.length]=Math.floor(Math.random()*200)
            histAccionNike[histAccionNike.length]=Math.floor(Math.random()*200)
            if(histAccionApple[histAccionApple.length-1]<=20)
                histAccionApple[histAccionApple.length-1]=30
            if(histAccionNike[histAccionNike.length-1]<=20)
                histAccionNike[histAccionNike.length-1]=30
            if(histAccionGoogle[histAccionGoogle.length-1]<=20)
                histAccionGoogle[histAccionGoogle.length-1]=30
            valAccionNike=histAccionNike[histAccionNike.length-1]
            valAccionGoogle=histAccionGoogle[histAccionGoogle.length-1]
            valAccionApple=histAccionApple[histAccionApple.length-1]
            MostrarValorAcciones(); 
        }
        const boton = document.getElementById("msj")
        boton.disabled = true;
        boton.innerHTML= "Deshabilitado"
        boton.style.opacity="0.2"
        puedePresionar = false;
        var conta = 10
        boton.addEventListener('click',() => {
            if (puedePresionar) 
            {
                document.getElementById("data_chat").innerHTML=wordGenerator()
                PerdidaGanancia()
                boton.disabled = true;
                boton.innerHTML= "Deshabilitado"
                boton.style.opacity="0.2"
                puedePresionar = false;
                var interval = setInterval(() => {
                    boton.innerHTML= "Deshabilitado " + conta
                    conta-=1
                },950)
                setTimeout(function() {
                    boton.disabled = false;
                    puedePresionar = true;
                    boton.innerHTML="Mensajes"
                    boton.style.opacity="1"
                    clearInterval(interval)
                    conta=10
                }, 10000);
            }
        })
        function wordIsPositive()
        {
            var rn = Math.round(Math.random()*1)
            if(rn==1)
                return true
            else
                return false
        }
        function randomNumber(opc, valActual, valMin)
        {
            if (!opc)
            {  
                var num = -valActual + valMin;
                var rn=Math.round(Math.random()*num)
                return rn
            }
            else 
            {
                var rn=Math.round(Math.random()*2000)
                return rn
            }
        }
        function wordGenerator()
        {
            var wordNumber=[]
            var rn = Math.round(Math.random()*7)
            var isPositive = wordIsPositive()
            var result
            if(wordIsPositive())
            {
                switch(rn)
                {
                    case 1:
                        wordNumber[0] = "Apple +$20";
                        valAccionApple=Math.round(valAccionApple+=20);
                        histAccionApple[histAccionApple.length]=valAccionApple
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 2:
                        wordNumber[0] = "Nike +$20";
                        valAccionNike=Math.round(valAccionNike+=20);
                        histAccionNike[histAccionNike.length]=valAccionNike
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 3:
                        wordNumber[0] = "Google +$20";
                        valAccionGoogle=Math.round(valAccionGoogle+=20);
                        histAccionGoogle[histAccionNike.length]=valAccionGoogle
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 4:
                        wordNumber[0] = "Apple +$50";
                        valAccionApple=Math.round(valAccionApple+=50);
                        histAccionApple[histAccionApple.length]=valAccionApple
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 5:
                        wordNumber[0] = "Nike +$50";
                        valAccionNike=Math.round(valAccionNike+=50);
                        histAccionNike[histAccionNike.length]=valAccionNike
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 6:
                        wordNumber[0] = "Google +$50";
                        valAccionGoogle=Math.round(valAccionGoogle+=50);
                        histAccionGoogle[histAccionNike.length]=valAccionGoogle
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 7:
                        wordNumber[0] = "Todas +$100";
                        valAccionApple=Math.round(valAccionApple+=100);
                        valAccionNike=Math.round(valAccionNike+=100);
                        valAccionGoogle=Math.round(valAccionGoogle+=100);
                        histAccionApple[histAccionApple.length]=valAccionApple;
                        histAccionNike[histAccionNike.length]=valAccionNike;
                        histAccionGoogle[histAccionNike.length]=valAccionGoogle;
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    default:
                        wordNumber[0] = "Cartera: +$20"
                        cartera = cartera+20;
                        gananciasTotales+=20;
                        if(cartera>=carteraMax)
                            carteraMax=cartera
                        ActualizarCartera()
                        ActualizarGains()
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                }
                MostrarValorAcciones();
                return wordNumber[0]
            }
            else
            {
                switch (rn)
                {
                    case 1:
                        wordNumber[0] = "Apple -$20";
                        result = valAccionApple-20
                        if(result<=0)
                            valAccionApple=20
                        else
                            valAccionApple-=20
                        histAccionApple[histAccionApple.length]=valAccionApple
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 2:
                        wordNumber[0] = "Nike -$20"
                        result = valAccionNike-20
                        if(result<=0)
                            valAccionNike=20
                        else
                            valAccionNike-=20
                        histAccionNike[histAccionNike.length]=valAccionNike
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 3:
                        wordNumber[0] = "Google -$20"
                        result = valAccionGoogle-20
                        if(result<=0)
                            valAccionGoogle=20
                        else
                            valAccionGoogle-=20
                        histAccionGoogle[histAccionNike.length]=valAccionGoogle
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 4:
                        wordNumber[0] = "Apple -$40"
                        result = valAccionApple-40
                        if(result<=0)
                            valAccionApple=50
                        else
                            valAccionApple-=40
                        histAccionApple[histAccionApple.length]=valAccionApple
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 5:
                        wordNumber[0] = "Nike -$40"
                        result = valAccionNike-40
                        if(result<=0)
                            valAccionNike=50
                        else
                            valAccionNike-=40
                        histAccionNike[histAccionNike.length]=valAccionNike
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 6:
                        wordNumber[0] = "Google -$40"
                        result = valAccionGoogle-40
                        if(result<=0)
                            valAccionGoogle=50
                        else
                            valAccionGoogle-=40
                        histAccionGoogle[histAccionNike.length]=valAccionGoogle
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    case 7:
                        wordNumber[0] = "Todas -$100"
                        result=valAccionApple-100
                        if(result<=0)
                            valAccionApple=10
                        else
                            valAccionApple=Math.round(valAccionApple-=100);
                        result=valAccionNike-100
                        if(result<=0)
                            valAccionNike=10
                        else
                            valAccionNike=Math.round(valAccionNike-=100);
                        result=valAccionGoogle-100
                        if(result<=0)
                            valAccionGoogle=10
                        else
                            valAccionGoogle=Math.round(valAccionGoogle-=100)
                        histAccionGoogle[histAccionNike.length]=valAccionGoogle;
                        histAccionApple[histAccionApple.length]=valAccionApple;
                        histAccionNike[histAccionNike.length]=valAccionNike;
                        drawGraph();
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                    default:
                        wordNumber[0] = "Cartera: -$20"
                        cartera-=20;
                        ActualizarCartera()
                        wordNumber[1] = randomNumber(isPositive, 0, 0)
                        break
                }
                MostrarValorAcciones();
                return wordNumber[0]
            }
        }
        const changeButton = document.getElementById('change-color');
        changeButton.addEventListener('click', () => {
            const computedStyle = getComputedStyle(document.documentElement);
            const clr_1 = computedStyle.getPropertyValue('--clr-1').trim();
            const clr2 = computedStyle.getPropertyValue('--clr2').trim();
            const logo = document.getElementById('logo');
            const logoOscuro = document.getElementById('logo-oscuro');
            const sol = document.getElementById('sun');
            const luna = document.getElementById('moon');
            let newValue, newValue2;
            if(clr_1 == '#000')
            {
                newValue='#ebebeb';
                logoOscuro.style.display = 'flex'
                sol.style.display = 'none';
                logo.style.display = 'none'
                luna.style.display = 'flex'
            }
            else if(clr_1 == '#ebebeb'){
                newValue='#000';
                logoOscuro.style.display = 'none'
                logo.style.display = 'flex'
                sol.style.display = 'flex';
                luna.style.display = 'none'
            }
            if(clr2 == '#ebebeb')
            {
                newValue2 = '#000'
            }
            else if(clr2 == '#000'){
                newValue2 ='#ebebeb';
            }
            document.documentElement.style.setProperty('--clr-1', newValue);
            document.documentElement.style.setProperty('--clr2', newValue2);
        });
        ActualizarCartera();
        drawGraph();
        var i=Number
        var coolInterval
        var secInterval
        var unlockedLogro1=false
        var unlockedLogro2=false
        var unlockedLogro3=false
        var unlockedLogro4=false
        i=10
        function contadores(){
            coolInterval=setInterval(()=>{
                valAleatorio();
                drawGraph();
                PerdidaGanancia();
                document.getElementById("coolDown").innerHTML='10'
                i=10
            },10000)
            secInterval=setInterval(()=>{
                i-=1
                document.getElementById("coolDown").innerHTML=i
                    if(cartera>=10000&&!unlockedLogro1){
                        Swal.fire({
                            title:"Logro desbloqueado, un inicio",
                            icon: 'success'
                        })
                        
                        unlockedLogro1=true;
                    }
                    if(cartera>=25000&&!unlockedLogro2){
                        Swal.fire({
                            title:"Logro desbloqueado, pequeño capital",
                            icon: 'success'
                        })
                        
                        unlockedLogro2=true;
                    }
                    if(cartera>=100000&&!unlockedLogro3){
                        Swal.fire({
                            title:"Logro desbloqueado, inversionista creciente",
                            icon:'success'
                        })
                        unlockedLogro3=true;
                    }
                    if(cartera>=1000000&&!unlockedLogro4){
                        Swal.fire({
                            title:"Logro desbloqueado, la leyenda",
                            icon: 'success'
                            
                        })
                        
                        unlockedLogro4=true;
                    }
            },1100)
        }
        function habilitarBotones() 
        { 
            boton.disabled = false;
            puedePresionar = true;
            boton.innerHTML="Mensajes"
            boton.style.opacity="1"
            btnApple.disabled=false
            btnApple.style.opacity="1"
            puedePresionarApple=true
            btnGoogle.disabled=false
            btnGoogle.style.opacity="1"
            puedePresionarGoogle=true
            btnNike.disabled=false
            btnNike.style.opacity="1"
            puedePresionarNike=true
        }
        function deshabilitarBotones()
        {
            boton.disabled = true;
            boton.innerHTML= "Deshabilitado"
            boton.style.opacity="0.3"
            btnApple.disabled = true;
            btnApple.style.opacity="0.3"
            btnNike.disabled = true;
            btnNike.style.opacity="0.3"
            btnGoogle.disabled = true;
            btnGoogle.style.opacity="0.3"
            puedePresionar = false;
            puedePresionarApple=false
            puedePresionarGoogle=false
            puedePresionarNike=false
        }

        const btnIniciar = document.getElementById("btnIniciar")
        var contadorTiempo = document.getElementById("contadorTiempo")
        btnIniciar.addEventListener('click',iniciarContador)
        
        function iniciarContador() {
            btnIniciar.style.display = "none";
            contadorTiempo.style.display="inline-block"
            tiempoJuego = 300
            contadores();
            habilitarBotones()
            function actualizarContador() {
            var minutos = Math.floor(tiempoJuego / 60);
            var segundos = tiempoJuego % 60;
            contadorTiempo.innerHTML=minutos.toString().padStart(2, "0") + ":" + segundos.toString().padStart(2, "0");
            tiempoJuego--;
                if (tiempoJuego < 0) {
                    pararJuego()
                    btnIniciar.style.display = "inline-block";
                    contadorTiempo.style.display="none"
                }
            }
            intervalo = setInterval(actualizarContador, 1000);
        }

        function reiniciarValores()
        {
            i=10
            valAccionApple=190;
            valAccionNike=107;
            valAccionGoogle=124;
            document.getElementById("valAccionApple").innerHTML=valAccionApple
            document.getElementById("valAccionNike").innerHTML=valAccionNike
            document.getElementById("valAccionGoogle").innerHTML=valAccionGoogle
            acciCompApple=0
            acciCompGoogle=0
            acciCompNike=0
            document.getElementById("acciCompApple").innerHTML=acciCompApple
            document.getElementById("acciCompNike").innerHTML=acciCompNike
            document.getElementById("acciCompGoogle").innerHTML=acciCompGoogle
            ultimoValorAp=0
            ultimoValorGo=0
            ultimoValorNi=0
            document.getElementById("coolDown").innerHTML='10'
            histSelected=[]
            histAccionApple=[]
            histAccionNike=[]
            histAccionGoogle=[]
            cartera=2000
            gananciasTotales=0
            document.getElementById("totalGains").innerHTML=gananciasTotales
            empresaSelect=-1
        }
        var span = document.getElementsByClassName("cerrar")[0];
        var modal = document.getElementById("ventanaModal");
        function pararJuego() 
        {
            clearInterval(intervalo);
            clearInterval(secInterval);
            clearInterval(coolInterval);
            deshabilitarBotones()
            NonSelected()
            mostrarModal()
            reiniciarValores()
            drawGraph()
            
            PerdidaGanancia()
            ActualizarCartera()
            
        }
        var acciVendiAppleT = document.getElementById("accVendiApple")
        var acciVendiGoogleT = document.getElementById("accVendiGoogle")
        var acciVendiNikeT = document.getElementById("accVendiNike")
        var maxCarteraT = document.getElementById("carteraMaximo") 
        var gainsTotal = document.getElementById("gananciasTotales")
        function mostrarModal(){
            modal.style.display="block"
            acciVendiAppleT.innerHTML=acciVendiApple.toString()
            acciVendiGoogleT.innerHTML=acciVendiGoogle.toString()
            acciVendiNikeT.innerHTML=acciVendiNike.toString()
            maxCarteraT.innerHTML=carteraMax.toString()
            gainsTotal.innerHTML=gananciasTotales.toString()
        }
        deshabilitarBotones()
        contadorTiempo.style.display="none"
        
        span.addEventListener("click",() => {
            modal.style.display = "none";
        });
        window.addEventListener("click",(event)=> {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        });
    </script>
    
</body>
</html>
